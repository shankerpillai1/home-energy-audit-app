æ„å»ºå‡ºä¸€ä¸ªå®Œæ•´çš„ã€å¯ç»§æ‰¿çš„ã€æ¨¡å—åŒ–çš„è½¯ä»¶è®¾è®¡æ–¹æ¡ˆæ€»è§ˆï¼Œç¡®ä¿ï¼š

é€»è¾‘æµç•… âœ…

æ¨¡å—è¾¹ç•Œæ˜ç¡® âœ…

ç”¨æˆ·äº¤äº’åˆç† âœ…

æœªæ¥ç»´æŠ¤æ˜“äºæ‰©å±• âœ…

ğŸ§­ å®¶åº­èƒ½æºå®¡è®¡ App æ€»ä½“æ¶æ„è®¾è®¡æ–¹æ¡ˆï¼ˆé«˜å±‚æµç¨‹+æ¨¡å—äº¤äº’ï¼‰
ğŸŒ é¡¹ç›®ç›®æ ‡å®šä½
å¹³å°ï¼šFlutter æ„å»ºï¼Œæ”¯æŒ ç§»åŠ¨ç«¯ + Web

ä¸»è¦åŠŸèƒ½ï¼šå¼•å¯¼ç”¨æˆ·é€šè¿‡å¯¹è¯å¼ UI å®ŒæˆèŠ‚èƒ½è¯„ä¼°ä»»åŠ¡ï¼Œå¹¶è®°å½•ä»»åŠ¡è¿›åº¦ã€å»ºè®®ã€æŠ¥å‘Šç­‰

ç‰¹åˆ«æ¨¡å—ï¼šä½ è´Ÿè´£ Air Leakage æ£€æµ‹

æ‰©å±•æ€§éœ€æ±‚ï¼šå…¶ä»–èŠ‚èƒ½æ¨¡å—å¦‚ Thermostatã€ACã€Washer ç­‰å°†æœªæ¥æ¥å…¥ï¼Œå› æ­¤ç³»ç»Ÿè®¾è®¡éœ€æ¨¡å—åŒ–

ğŸ—‚ï¸ æ€»ä½“æ¨¡å—åˆ’åˆ†
vbnet
Copy
Edit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Authentication Module      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ï¼ˆé¦–æ¬¡ç™»å½•åˆ¤æ–­ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          User Intro Module         â”‚ï¼ˆZip codeã€Own/Rentã€ç”µåŠ›å…¬å¸ã€é¢„ç®—ã€è®¾å¤‡ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ï¼ˆå®Œæˆåè¿›å…¥ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Home Screen             â”‚ï¼ˆDashboardã€To-Doã€Remindersã€Doneã€Assistantï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â†’  Assistant Moduleï¼ˆæ¨¡æ‹ŸAIå¯¹è¯ + å¼•å¯¼å¯¼èˆªï¼‰
â”‚ Retrofit Modules     â”‚    â†’  å¼•å¯¼è¿›å…¥ä¸åŒæ¨¡å—ï¼ˆLeakage, AC, Washer...ï¼‰
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Air Leakage   â”‚   â”‚  â† å½“å‰æˆ‘ä»¬è´Ÿè´£çš„å”¯ä¸€â€œå¯æ“ä½œâ€æ¨¡å—
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Thermostat    â”‚   â”‚  â† é¢„ç•™æ¨¡å—å…¥å£ï¼Œæœªå®ç°
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ ...                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ”„ æ ¸å¿ƒç”¨æˆ·äº¤äº’æµç¨‹ï¼ˆåŸºäºç”¨æˆ·æ—…ç¨‹ï¼‰
ğŸ§‘â€ğŸ’¼ ç¬¬ä¸€æ¬¡ä½¿ç”¨ç”¨æˆ·
plaintext
Copy
Edit
[å¯åŠ¨App]
     â†“
[æ˜¯å¦å·²æ³¨å†Œï¼Ÿ] â€”â€”â†’ å¦ â€”â€”â†’ [Register é¡µé¢]
     â†“ æ˜¯
[æ˜¯å¦å·²å®Œæˆ Intro?] â€”â€”â†’ å¦ â€”â€”â†’ [User Intro é¡µé¢]
     â†“ æ˜¯
[è¿›å…¥ HomePage]
ğŸ  Home Page æ¨¡å—ç»“æ„
plaintext
Copy
Edit
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Top Bar: èŠ‚èƒ½é‡‘é¢ + èŠ‚çœç”µé‡å±•ç¤º      â”‚ â† Dashboard ç»„ä»¶
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ To-Do List (å¯ç‚¹å‡»è·³è½¬ä»»åŠ¡æ¨¡å—é¡µ)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Periodic Reminders (å¹´æ£€ç­‰æé†’)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Done List (ç”¨æˆ·å·²å®Œæˆä»»åŠ¡)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Assistant å¼•å¯¼æŒ‰é’®ï¼ˆæ‰“å¼€æ¨¡æ‹Ÿå¯¹è¯åŠ©æ‰‹ï¼‰â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸ’¬ Assistant æ¨¡å—æµç¨‹
plaintext
Copy
Edit
ç”¨æˆ·è¿›å…¥ Assistant
     â†“
é€‰æ‹©ç›®æ ‡ï¼ˆèŠ‚èƒ½ / æ›¿æ¢è®¾å¤‡ / æå‡èˆ’é€‚åº¦ / æµè§ˆæ‰€æœ‰æ”¹é€ ï¼‰
     â†“
æ¨èä¼˜å…ˆæ¨¡å—ï¼ˆLED / Seal Air Leaks / Thermostatï¼‰
     â†“
ç‚¹å‡»æŸæ¨¡å— â†’ è·³è½¬å¯¹åº”æ¨¡å—é¡µ
âœ… å½“å‰å·²å®ç°è·³è½¬æ¨¡å—ï¼šSeal Air Leaks

ğŸŒª Air Leakage æ¨¡å—ç»“æ„
plaintext
Copy
Edit
[Assistant å¼•å¯¼è¿›å…¥]
     â†“
[LeakageHistoryPage] â† æŸ¥çœ‹å†å²ä»»åŠ¡
     â”œâ”€â”€ æœç´¢/ç­›é€‰
     â””â”€â”€ æ–°å»ºä»»åŠ¡
            â†“
      [LeakageTaskPage]
        â”œâ”€â”€ æ ‡é¢˜ã€ç±»å‹ã€ä¸Šä¼ ç…§ç‰‡
        â”œâ”€â”€ ä¿å­˜ï¼ˆä»…æœ¬åœ°ä¿å­˜ï¼‰
        â””â”€â”€ æäº¤ï¼ˆå‘é€ç»™åç«¯ AIï¼‰
               â†“
         [LeakageResultPage]
           â”œâ”€â”€ æ˜¾ç¤ºåˆ†æå›¾åƒ
           â”œâ”€â”€ æ˜¾ç¤ºå»ºè®®ï¼ˆå¯åŠ å…¥ To-Doï¼‰
           â””â”€â”€ ä¸‹è½½æŠ¥å‘Š
ğŸ“¦ æ•°æ®ç»“æ„ & é€»è¾‘è®¾è®¡æ ¸å¿ƒåŸåˆ™ï¼ˆç•¥æï¼‰
æ‰€æœ‰æ¨¡å—éƒ½ä»¥ã€ŒRetrofitModuleã€ä¸ºå•ä½ï¼Œå¯è¢«åŠ å…¥ To-Do / Reminder / Done List

æ‰€æœ‰ç”¨æˆ·ä»»åŠ¡ï¼ˆå¦‚ leakage æ£€æµ‹ï¼‰è®°å½•ä¸º Taskï¼Œå¯ä»¥å­˜å‚¨å†å²è®°å½•ã€åˆ†æç»“æœ

Assistant ä¸æ¨¡å—ç»‘å®šä¸ºå¼•å¯¼è·¯å¾„ï¼Œä½†ä¸å­˜æ•°æ®ï¼Œåªå¯¼èˆª

æ•°æ®æœ¬åœ°å­˜å‚¨ä¼˜å…ˆï¼ˆè€ƒè™‘åç»­æ¥å…¥äº‘åŒæ­¥é¢„ç•™æ¥å£ï¼‰

âœ… è½¯ä»¶è®¾è®¡äº®ç‚¹ï¼ˆç¬¦åˆâ€œå¯ç»§æ‰¿ã€å¯æ‰©å±•ã€å¯ç»´æŠ¤â€çš„æˆç†Ÿæ ‡å‡†ï¼‰
è®¾è®¡ç»´åº¦	å®ç°æ–¹å¼è¯´æ˜
æ¨¡å—åŒ–åˆ†å±‚æ¸…æ™°	æ¯ä¸ªæ¨¡å—èŒè´£åˆ†æ˜ï¼Œå¯ç‹¬ç«‹å¼€å‘å’Œå¯¹æ¥
ç”¨æˆ·æ—…ç¨‹å®Œæ•´	åŒ…æ‹¬é¦–æ¬¡ä½¿ç”¨ã€æ™®é€šä½¿ç”¨ã€å†å²æŸ¥è¯¢ã€åˆ†æåé¦ˆå…¨æµç¨‹
æœªæ¥å¯æ‰©å±•æ€§å¼º	Assistant â†’ ä»»æ„æ–° retrofit æ¨¡å—æ’æ‹”å¼å¼•å¯¼
å‰åç«¯è§£è€¦	AIæ¨¡å—ä»…é€šè¿‡ Submit æ¥å£äº¤äº’ï¼Œç»“æœæ ‡å‡†æ ¼å¼è¿”å›
æ•°æ®é›†ä¸­ç®¡ç†	æ‰€æœ‰æ•°æ®ç»“æ„å›´ç»• Task å’Œ RetrofitActionï¼Œé€»è¾‘ç»Ÿä¸€
å¼•å¯¼äººæ€§åŒ–	Assistant æ¨¡å—è®¾è®¡å……åˆ†é™ä½ç”¨æˆ·ä½¿ç”¨é—¨æ§›
å¹³å°ç»Ÿä¸€æ€§å¥½	é€šè¿‡ Flutter ç»“æ„è®¾è®¡å…¼å®¹ Web & Mobile åŒæ­¥é€»è¾‘
lib/
â”œâ”€ config/
â”‚  â””â”€ themes.dart
â”‚     â†’ Global Material theme (ColorScheme, TextTheme, AppBar, buttons).
â”‚
â”œâ”€ models/
â”‚  â”œâ”€ leakage_task.dart
â”‚     â†’ Core data model for Leakage:
â”‚       - LeakageTask: id/title/type/photoPaths/createdAt + optional report.
â”‚       - LeakReport: optional payload (energy loss, severity, savings, points).
â”‚       - LeakReportPoint: a single leak point (title/subtitle/imagePath).
â”‚  â””â”€ user_profile.dart
â”‚     â†’ User profile / intro questionnaire model (future: stored to user.json).
â”‚
â”œâ”€ repositories/
â”‚  â”œâ”€ file_task_repository.dart
â”‚     â†’ TaskRepository implementation backed by JSON files on disk.
â”‚       - With per-user/per-module paths (users/<uid>/<module>/tasks.json).
â”‚       - In debug on desktop, also mirrors JSON into your workspace folder
â”‚         under .debug_data/â€¦ so you can open it directly from VS Code.
â”‚  â””â”€ task_repository.dart
â”‚     â†’ Repository interface: fetchAll/fetchById/upsert/delete.
â”‚
â”œâ”€ services/
â”‚  â”œâ”€ assistant_service.dart
â”‚     â†’ Assistant flow logic (no persistence).
â”‚  â”œâ”€ auth_service.dart
â”‚     â†’ Auth session/credentials. Use secure storage for sensitive tokens later.
â”‚  â”œâ”€ backend_api_service.dart
â”‚     â†’ Placeholder for HTTP calls (submit analysis / fetch results).
â”‚  â”œâ”€ file_storage_service.dart
â”‚     â†’ Low-level JSON file I/O.
â”‚       - Resolves sandbox paths.
â”‚       - Provides per-user/per-module files.
â”‚       - (Debug desktop) optional workspace mirroring to ./.debug_data/.
â”‚  â””â”€ settings_service.dart
â”‚     â†’ Lightweight app settings (SharedPreferences). Flags only (e.g. hasSeenIntro).
â”‚
â”œâ”€ state/
â”‚  â”œâ”€ assistant_provider.dart         â†’ Riverpod state for Assistant.
â”‚  â”œâ”€ leakage_task_provider.dart      â†’ StateNotifier for leakage tasks (uses TaskRepository).
â”‚  â”œâ”€ repository_providers.dart       â†’ Wires FileStorageService + FileTaskRepository (+ user id).
â”‚  â””â”€ user_provider.dart              â†’ Auth/intro state (exposes isLoggedIn, completedIntro, uid).
â”‚
â”œâ”€ ui/
â”‚  â”œâ”€ assistant/                      â†’ Assistant UI.
â”‚  â”œâ”€ auth/                           â†’ Login/Register screens.
â”‚  â”œâ”€ home/                           â†’ Home dashboard & entry cards.
â”‚  â”œâ”€ intro/                          â†’ Intro questionnaire UI.
â”‚  â””â”€ modules/leakage/
â”‚     â”œâ”€ dashboard_page.dart          â†’ Main â€œLeakageâ€ hub (tutorial, new task, in-progress/completed).
â”‚     â”œâ”€ report_page.dart             â†’ Report UI (reads task.report; can generate mock for testing).
â”‚     â””â”€ task_page.dart               â†’ Create/Edit Task (multi leak points, RGB/Thermal buttons).
â”‚
â”œâ”€ utils/
â”‚  â””â”€ â€¦                               â†’ Helpers/constants as needed.
â”‚
â”œâ”€ app.dart                           â†’ Root app widget (MaterialApp.router + GoRouter guards).
â””â”€ main.dart                          â†’ Entry point (ProviderScope + EnergyAuditApp).
